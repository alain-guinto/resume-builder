<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Resume — ResumeForge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
  <style>
    .upload-page { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; background: linear-gradient(180deg, #f8fafc 0%, #fff 100%); }
    .upload-page-card { background: #fff; border-radius: 20px; padding: 2.5rem; max-width: 480px; width: 100%; box-shadow: 0 20px 60px rgba(0,0,0,0.08); border: 1px solid #e2e8f0; }
    .upload-page-back { display: inline-flex; align-items: center; gap: 0.5rem; color: #64748b; text-decoration: none; font-size: 0.9rem; font-weight: 500; margin-bottom: 1.5rem; }
    .upload-page-back:hover { color: var(--rf-primary); }
    .upload-page-title { font-size: 1.5rem; font-weight: 700; color: #0f172a; margin-bottom: 0.5rem; }
    .upload-page-sub { font-size: 0.95rem; color: #64748b; margin-bottom: 1.5rem; }
    .upload-source-question { font-size: 1rem; font-weight: 600; color: #334155; margin-bottom: 1.25rem; }
    .upload-source-options { display: flex; flex-direction: column; gap: 0.75rem; }
    .upload-source-btn { display: flex; align-items: center; gap: 1rem; width: 100%; padding: 1rem 1.25rem; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.2s; text-decoration: none; border: 2px solid #e2e8f0; background: #fff; color: #334155; text-align: left; }
    .upload-source-btn:hover { border-color: var(--rf-primary); color: var(--rf-primary); }
    .upload-source-btn svg, .upload-source-btn .source-icon { flex-shrink: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
    .upload-source-btn .source-label { flex: 1; }
    .upload-source-btn .source-desc { font-size: 0.8rem; font-weight: 400; color: #64748b; margin-top: 0.2rem; }
    .upload-local-section { display: none; margin-top: 1.5rem; }
    .upload-local-section.visible { display: block; }
    .upload-zone { cursor: pointer; margin-bottom: 1rem; }
    .upload-attachment { margin-top: 1rem; }
    .attachment-preview { display: flex; align-items: center; gap: 1rem; padding: 1rem 1.25rem; background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 12px; }
    .attachment-icon { flex-shrink: 0; width: 40px; height: 40px; background: #fff; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--rf-primary); }
    .attachment-info { flex: 1; min-width: 0; }
    .attachment-filename { display: block; font-weight: 600; color: #0f172a; font-size: 0.95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .attachment-size { font-size: 0.8rem; color: #64748b; }
    .attachment-actions { display: flex; gap: 0.5rem; flex-shrink: 0; }
    .attachment-btn { padding: 0.4rem 0.9rem; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; font-family: inherit; border: none; transition: all 0.15s; }
    .attachment-btn-change { background: var(--rf-primary); color: #fff; }
    .attachment-btn-remove { background: #fff; color: #64748b; border: 1px solid #e2e8f0; }
    .btn-next { display: none; align-items: center; justify-content: center; gap: 0.5rem; width: 100%; margin-top: 1rem; padding: 0.9rem; background: var(--rf-primary); color: #fff; border: none; border-radius: 12px; font-size: 1rem; font-weight: 600; cursor: pointer; font-family: inherit; }
    .btn-next.visible { display: inline-flex; }
    .btn-next:hover { background: var(--rf-primary-hover); }
    .cloud-coming-soon { font-size: 0.8rem; color: #94a3b8; margin-top: 0.25rem; }
  </style>
</head>
<body>
  <div class="upload-page">
    <div class="upload-page-card">
      <a href="/upload" class="upload-page-back">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back
      </a>
      <h1 class="upload-page-title">Upload Your Resume</h1>
      <p class="upload-page-sub">Choose where to upload your resume from.</p>
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class="upload-flash" style="margin-bottom:1rem;padding:0.75rem;border-radius:8px;background:#fef2f2;color:#dc2626;font-size:0.9rem;">
        {% for category, msg in messages %}{{ msg }}{% endfor %}
      </div>
      {% endif %}
      {% endwith %}
      <p class="upload-source-question">Where is your resume stored?</p>
      <div class="upload-source-options">
        <button type="button" class="upload-source-btn" id="btn-local" data-source="local">
          <div class="source-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          </div>
          <div class="source-label">
            <div>My Computer</div>
            <div class="source-desc">Upload from your local drive</div>
          </div>
        </button>
        <button type="button" class="upload-source-btn" id="btn-google-drive" data-source="google">
          <div class="source-icon">
            <svg width="24" height="24" viewBox="0 0 24 24"><path fill="#4285F4" d="M12.545 10.239v3.821h5.445c-.712 2.315-2.647 3.972-5.445 3.972a6.033 6.033 0 110-12.064c1.498 0 2.866.549 3.921 1.453l2.814-2.814A9.969 9.969 0 0012.545 2C7.021 2 2.545 6.477 2.545 12s4.476 10 10 10c8.659 0 10.801-7.705 9.348-11.818H12.545z"/><path fill="#34A853" d="M21.97 12.083c0-.711-.064-1.4-.182-2.064H12.545v3.905h5.31a4.67 4.67 0 01-2.018 3.063l3.24 2.512c1.928-1.777 3.04-4.393 3.04-7.498z"/><path fill="#FBBC05" d="M5.275 14.267A5.96 5.96 0 014.955 12c0-.656.119-1.29.319-1.886L2.07 7.648A9.98 9.98 0 002.545 12c0 1.61.386 3.13 1.055 4.471l2.675-2.204z"/><path fill="#EA4335" d="M12.545 5.682a5.435 5.435 0 013.834 1.5l2.853-2.853a9.998 9.998 0 00-6.687-2.329c-4.524 0-8.5 3.477-8.5 9.818 0 1.544.277 3.018.782 4.403l2.853-2.853a5.435 5.435 0 013.552-1.786z"/></svg>
          </div>
          <div class="source-label">
            <div>Google Drive</div>
            <div class="source-desc">Import from your Google Drive</div>
          </div>
        </button>
        <button type="button" class="upload-source-btn" id="btn-dropbox" data-source="dropbox">
          <div class="source-icon">
            <svg width="24" height="24" viewBox="0 0 24 24"><path fill="#0061FF" d="M6 1.807L0 5.629l6 3.822 6.001-3.822L6 1.807zM18 1.807l-6 3.822 6 3.822 6-3.822-6-3.822zM0 13.274l6 3.822 6.001-3.822L6 9.452l-6 3.822zM18 9.452l-6 3.822 6 3.822 6-3.822-6-3.822zM6 18.371l6.001 3.822 6-3.822-6-3.822L6 18.371z"/></svg>
          </div>
          <div class="source-label">
            <div>Dropbox</div>
            <div class="source-desc">Import from your Dropbox</div>
          </div>
        </button>
      </div>

      <div class="upload-local-section" id="local-section">
        <form id="upload-form" method="POST" action="{{ url_for('pages.upload') }}" enctype="multipart/form-data">
          <input type="file" name="resume" id="resume-file-input" accept=".pdf,.docx,.doc" tabindex="-1" style="display:none;">
          <div class="upload-zone" id="upload-zone">
            <div id="upload-content">
              <div class="upload-icon">☁️</div>
              <div class="upload-label">Drag &amp; drop your resume here</div>
              <p class="upload-hint">or <span>click to browse</span> &nbsp;·&nbsp; PDF or DOCX &nbsp;·&nbsp; Max 10 MB</p>
            </div>
          </div>
          <div class="upload-attachment" id="upload-attachment" style="display:none;">
            <div class="attachment-preview">
              <div class="attachment-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
              </div>
              <div class="attachment-info">
                <span class="attachment-filename" id="attachment-filename"></span>
                <span class="attachment-size" id="attachment-size"></span>
              </div>
              <div class="attachment-actions">
                <button type="button" class="attachment-btn attachment-btn-change" id="btn-change-file">Change</button>
                <button type="button" class="attachment-btn attachment-btn-remove" id="btn-remove-file">Remove</button>
              </div>
            </div>
          </div>
          <div class="upload-progress" id="upload-progress" style="display:none;">
            <div class="progress-bar-track">
              <div class="progress-bar-fill" id="progress-fill"></div>
            </div>
            <div class="upload-status" id="upload-status"></div>
          </div>
          <button type="button" class="btn-next" id="btn-next">
            Next
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
          </button>
        </form>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/upload_source.js') }}"></script>
</body>
</html>
