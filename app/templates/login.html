<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In — ResumeForge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
</head>
<body>

<main class="login-main">
  <div class="login-card">

    <!-- Left panel: illustration + branding -->
    <div class="login-card-left">
      <a href="/" class="login-brand">
        <span class="logo-resume">Resume</span><span class="logo-forge">Forge</span>
      </a>
      <div class="login-illustration">
        <div class="login-image-frame">
          <img src="{{ url_for('static', filename='images/professional-woman.png') }}" alt="Professional woman with cheerful look">
        </div>
      </div>
    </div>

    <!-- Right panel: form -->
    <div class="login-card-right">
      <a href="/" class="login-close" title="Close" aria-label="Close">✕</a>

      <!-- Sign-In panel -->
      <div id="panelSignIn" class="login-panel">
        <h1 class="login-title">Login</h1>

        <form class="login-form" id="signinForm" novalidate>
          <div class="field-group">
            <label for="siEmail">Email</label>
            <div class="field-with-icon">
              <svg class="field-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
              <input type="email" class="field-input" id="siEmail" placeholder="Email Address" autocomplete="email" required>
            </div>
          </div>
          <div class="field-group">
            <label for="siPassword">Password</label>
            <div class="field-with-icon">
              <svg class="field-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              <div class="password-wrap">
                <input type="password" class="field-input" id="siPassword" placeholder="Password" autocomplete="current-password" minlength="6" maxlength="64" required>
                <button type="button" class="show-pass" data-target="siPassword" title="Show/hide">
                  <svg class="eye-off" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                  <svg class="eye-on" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                </button>
              </div>
            </div>
          </div>
          <a href="#" class="forgot-link">Forgot Password?</a>
          <button type="submit" class="submit-btn" id="siSubmit">Log In</button>
          <div class="form-error" id="siError">{% if error == 'google_auth_failed' %}Google sign-in failed. Please try again.{% elif error == 'facebook_auth_failed' %}Facebook sign-in failed. Please try again.{% endif %}</div>
        </form>

        <div class="or-divider"><span>Or Continue With</span></div>

        <div class="social-stack social-row">
          {% if google_enabled %}
          <a class="social-btn-circle google" href="/auth/google" title="Sign in with Google">
          {% else %}
          <button class="social-btn-circle google not-configured" data-service="Google" title="Sign in with Google">
          {% endif %}
            <svg width="22" height="22" viewBox="0 0 24 24">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
          {% if google_enabled %}</a>{% else %}</button>{% endif %}

          {% if facebook_enabled %}
          <a class="social-btn-circle facebook" href="/auth/facebook" title="Sign in with Facebook">
          {% else %}
          <button class="social-btn-circle facebook not-configured" data-service="Facebook" title="Sign in with Facebook">
          {% endif %}
            <svg width="22" height="22" viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
          {% if facebook_enabled %}</a>{% else %}</button>{% endif %}
        </div>

        <p class="terms-text">
          By signing in you agree to our
          <a href="#" class="legal-link" data-modal="terms">Terms</a> and
          <a href="#" class="legal-link" data-modal="privacy">Privacy Policy</a>.
        </p>
        <p class="signup-link">Don't have an account? <a href="#" id="switchToSignUp">Sign Up here</a></p>
      </div>

      <!-- Sign-Up panel -->
      <div id="panelSignUp" class="login-panel" style="display:none;">
        <h1 class="login-title">Create Account</h1>

        <form class="login-form" id="signupForm" novalidate>
          <div class="field-group">
            <label for="suName">Full Name</label>
            <div class="field-with-icon">
              <svg class="field-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              <input type="text" class="field-input" id="suName" placeholder="Full Name" autocomplete="name">
            </div>
          </div>
          <div class="field-group">
            <label for="suEmail">Email</label>
            <div class="field-with-icon">
              <svg class="field-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
              <input type="email" class="field-input" id="suEmail" placeholder="Email Address" autocomplete="email" required>
            </div>
          </div>
          <div class="field-group">
            <label for="suPassword">Password</label>
            <div class="field-with-icon">
              <svg class="field-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
              <div class="password-wrap">
                <input type="password" class="field-input" id="suPassword" placeholder="Create Password" autocomplete="new-password" minlength="6" maxlength="64" required>
                <button type="button" class="show-pass" data-target="suPassword" title="Show/hide">
                  <svg class="eye-off" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                  <svg class="eye-on" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                </button>
              </div>
            </div>
            <p class="field-hint">Password should be between 6–64 characters.</p>
          </div>
          <button type="submit" class="submit-btn">Create Account</button>
          <div class="form-error" id="suError"></div>
        </form>

        <div class="or-divider"><span>Or Continue With</span></div>

        <div class="social-stack social-row">
          {% if google_enabled %}
          <a class="social-btn-circle google" href="/auth/google" title="Continue with Google">
          {% else %}
          <button class="social-btn-circle google not-configured" data-service="Google" title="Continue with Google">
          {% endif %}
            <svg width="22" height="22" viewBox="0 0 24 24">
              <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
              <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
              <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
              <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
            </svg>
          {% if google_enabled %}</a>{% else %}</button>{% endif %}

          {% if facebook_enabled %}
          <a class="social-btn-circle facebook" href="/auth/facebook" title="Continue with Facebook">
          {% else %}
          <button class="social-btn-circle facebook not-configured" data-service="Facebook" title="Continue with Facebook">
          {% endif %}
            <svg width="22" height="22" viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
          {% if facebook_enabled %}</a>{% else %}</button>{% endif %}
        </div>

        <p class="terms-text">
          By creating an account you agree to our
          <a href="#" class="legal-link" data-modal="terms">Terms</a> and
          <a href="#" class="legal-link" data-modal="privacy">Privacy Policy</a>.
        </p>
        <p class="signup-link">Already have an account? <a href="#" id="switchToSignIn">Sign in</a></p>
      </div>

    </div>
  </div>
</main>

<footer class="login-footer">
  <a href="#" class="legal-link" data-modal="terms">Terms &amp; Conditions</a>
  <span>|</span>
  <a href="#" class="legal-link" data-modal="privacy">Privacy Policy</a>
  <span>|</span>
  <a href="mailto:support@resumeforge.io">Contact Us</a>
</footer>

<!-- ══════════════════ TERMS & CONDITIONS MODAL ══════════════════════════════ -->
<div class="legal-modal-overlay" id="modalTerms">
  <div class="legal-modal">
    <div class="legal-modal-header">
      <h2>Terms &amp; Conditions</h2>
      <button class="legal-modal-close" data-close="modalTerms">✕</button>
    </div>
    <div class="legal-modal-body">
      <p class="legal-effective">Effective Date: January 1, 2026</p>

      <h3>1. Acceptance of Terms</h3>
      <p>By accessing or using ResumeForge ("Service"), you agree to be bound by these Terms and Conditions. If you disagree with any part of these terms, you may not access the Service.</p>

      <h3>2. Description of Service</h3>
      <p>ResumeForge provides an online resume builder that allows users to create, edit, and download professional resumes. We offer free and premium plans with varying levels of access to features and templates.</p>

      <h3>3. User Accounts</h3>
      <p>When you create an account, you must provide accurate and complete information. You are responsible for safeguarding your account credentials and for all activities that occur under your account. You must immediately notify us of any unauthorized use of your account.</p>

      <h3>4. Intellectual Property</h3>
      <p>The Service and its original content, features, and functionality are owned by ResumeForge and are protected by international copyright, trademark, and other intellectual property laws. Your resume content remains your own property.</p>

      <h3>5. Acceptable Use</h3>
      <p>You agree not to: (a) use the Service for any unlawful purpose; (b) upload content that infringes on any third-party intellectual property rights; (c) attempt to gain unauthorized access to any part of the Service; (d) use automated tools to access the Service without our prior written consent.</p>

      <h3>6. Payment and Subscriptions</h3>
      <p>Some features of the Service require a paid subscription. Billing is handled securely through our payment processors. Subscriptions auto-renew unless cancelled. Refunds are provided at our discretion within 14 days of purchase if the service has not been substantially used.</p>

      <h3>7. Disclaimer of Warranties</h3>
      <p>The Service is provided "as is" without warranties of any kind, express or implied. ResumeForge does not warrant that the Service will be error-free, secure, or continuously available.</p>

      <h3>8. Limitation of Liability</h3>
      <p>In no event shall ResumeForge be liable for indirect, incidental, special, or consequential damages arising from your use of the Service, including but not limited to loss of data or employment opportunities.</p>

      <h3>9. Termination</h3>
      <p>We reserve the right to terminate or suspend your account at our sole discretion, without notice, for conduct that we believe violates these Terms or is harmful to other users, us, third parties, or the Service.</p>

      <h3>10. Changes to Terms</h3>
      <p>We reserve the right to modify these terms at any time. We will notify users of significant changes via email or through the Service. Continued use of the Service after changes constitutes acceptance of the new terms.</p>

      <h3>11. Governing Law</h3>
      <p>These Terms shall be governed by and construed in accordance with applicable laws, without regard to conflict of law provisions.</p>

      <h3>12. Contact</h3>
      <p>For questions about these Terms, please contact us at <a href="mailto:legal@resumeforge.io">legal@resumeforge.io</a>.</p>
    </div>
    <div class="legal-modal-footer">
      <button class="legal-accept-btn" data-close="modalTerms">I Understand</button>
    </div>
  </div>
</div>

<!-- ══════════════════ PRIVACY POLICY MODAL ══════════════════════════════════ -->
<div class="legal-modal-overlay" id="modalPrivacy">
  <div class="legal-modal">
    <div class="legal-modal-header">
      <h2>Privacy Policy</h2>
      <button class="legal-modal-close" data-close="modalPrivacy">✕</button>
    </div>
    <div class="legal-modal-body">
      <p class="legal-effective">Effective Date: January 1, 2026</p>

      <h3>1. Information We Collect</h3>
      <p><strong>Account information:</strong> When you register, we collect your name, email address, and password (stored as a secure hash). If you sign in via Google or Facebook, we receive your profile name, email, and profile picture from that provider.</p>
      <p><strong>Resume content:</strong> Any resume data you enter — work history, education, skills, contact information — is stored in our database to enable editing across sessions.</p>
      <p><strong>Usage data:</strong> We may collect information about how you interact with the Service, including pages visited and features used, to improve our product.</p>

      <h3>2. How We Use Your Information</h3>
      <p>We use your information to: (a) provide and improve the Service; (b) send account-related emails (password reset, important notices); (c) respond to your support requests; (d) analyze aggregate usage patterns to improve features.</p>
      <p>We do not sell your personal information to third parties.</p>

      <h3>3. Third-Party Authentication</h3>
      <p>If you choose to sign in with Google or Facebook, those providers' privacy policies also apply. We only receive the basic profile information you authorize. We do not receive your social media passwords.</p>

      <h3>4. Cookies and Tracking</h3>
      <p>We use essential session cookies to keep you logged in. We may use analytics cookies (e.g., anonymized usage data) to understand how users interact with our Service. You can control cookies through your browser settings.</p>

      <h3>5. Data Storage and Security</h3>
      <p>Your data is stored on secure servers. We use industry-standard encryption (TLS/HTTPS) for data in transit. Passwords are stored as cryptographic hashes and cannot be recovered. However, no online service can guarantee 100% security.</p>

      <h3>6. Data Retention</h3>
      <p>We retain your account data for as long as your account is active. If you delete your account, we will delete your personal data within 30 days, except where required by law.</p>

      <h3>7. Your Rights</h3>
      <p>You have the right to: (a) access the personal data we hold about you; (b) request correction of inaccurate data; (c) request deletion of your account and associated data; (d) export your resume data. To exercise these rights, contact us at <a href="mailto:privacy@resumeforge.io">privacy@resumeforge.io</a>.</p>

      <h3>8. Children's Privacy</h3>
      <p>The Service is not directed to children under the age of 13. We do not knowingly collect personal information from children under 13.</p>

      <h3>9. Changes to This Policy</h3>
      <p>We may update this Privacy Policy from time to time. We will notify you of significant changes via email or a prominent notice on the Service.</p>

      <h3>10. Contact Us</h3>
      <p>If you have questions about this Privacy Policy, please contact our Data Protection Officer at <a href="mailto:privacy@resumeforge.io">privacy@resumeforge.io</a>.</p>
    </div>
    <div class="legal-modal-footer">
      <button class="legal-accept-btn" data-close="modalPrivacy">I Understand</button>
    </div>
  </div>
</div>

<script>
'use strict';

function showPanel(panel) {
  document.getElementById('panelSignIn').style.display = panel === 'signin' ? '' : 'none';
  document.getElementById('panelSignUp').style.display = panel === 'signup' ? '' : 'none';
}
document.getElementById('switchToSignUp').addEventListener('click', e => { e.preventDefault(); showPanel('signup'); });
document.getElementById('switchToSignIn').addEventListener('click', e => { e.preventDefault(); showPanel('signin'); });

document.querySelectorAll('.show-pass').forEach(btn => {
  btn.addEventListener('click', function() {
    const inp    = document.getElementById(this.dataset.target);
    const eyeOff = this.querySelector('.eye-off');
    const eyeOn  = this.querySelector('.eye-on');
    const hidden = inp.type === 'password';
    inp.type        = hidden ? 'text'  : 'password';
    eyeOff.style.display = hidden ? 'none'  : '';
    eyeOn.style.display  = hidden ? ''      : 'none';
  });
});

document.querySelectorAll('.not-configured').forEach(btn => {
  btn.addEventListener('click', e => {
    e.preventDefault();
    const svc = btn.dataset.service;
    showError('siError', `${svc} sign-in is not yet configured. Please use email and password or contact support.`);
  });
});

document.getElementById('signinForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const email = document.getElementById('siEmail').value.trim();
  const pass  = document.getElementById('siPassword').value;
  const btn   = document.getElementById('siSubmit');
  hideError('siError');

  if (!email || !pass) { showError('siError', 'Email and password are required.'); return; }

  btn.textContent = 'Signing in…';
  btn.disabled    = true;

  try {
    const res  = await fetch('/auth/login', {
      method:  'POST',
      headers: { 'Content-Type': 'application/json' },
      body:    JSON.stringify({ email, password: pass }),
    });
    const data = await res.json();
    if (!res.ok) { showError('siError', data.error || 'Sign-in failed.'); return; }
    window.location.href = data.redirect || '/dashboard';
  } catch (err) {
    showError('siError', 'Network error. Please try again.');
  } finally {
    btn.textContent = 'Log In';
    btn.disabled    = false;
  }
});

document.getElementById('signupForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  const name  = document.getElementById('suName').value.trim();
  const email = document.getElementById('suEmail').value.trim();
  const pass  = document.getElementById('suPassword').value;
  hideError('suError');

  if (!email || !pass) { showError('suError', 'Email and password are required.'); return; }
  if (pass.length < 6)  { showError('suError', 'Password must be at least 6 characters.'); return; }

  const submitBtn = this.querySelector('.submit-btn');
  submitBtn.textContent = 'Creating account…';
  submitBtn.disabled    = true;

  try {
    const res  = await fetch('/auth/register', {
      method:  'POST',
      headers: { 'Content-Type': 'application/json' },
      body:    JSON.stringify({ name, email, password: pass }),
    });
    const data = await res.json();
    if (!res.ok) { showError('suError', data.error || 'Registration failed.'); return; }
    window.location.href = data.redirect || '/dashboard';
  } catch (err) {
    showError('suError', 'Network error. Please try again.');
  } finally {
    submitBtn.textContent = 'Create Account';
    submitBtn.disabled    = false;
  }
});

document.querySelectorAll('.legal-link').forEach(link => {
  link.addEventListener('click', function(e) {
    e.preventDefault();
    const id = this.dataset.modal === 'terms' ? 'modalTerms' : 'modalPrivacy';
    document.getElementById(id).classList.add('open');
  });
});
document.querySelectorAll('[data-close]').forEach(btn => {
  btn.addEventListener('click', function() {
    document.getElementById(this.dataset.close).classList.remove('open');
  });
});
document.querySelectorAll('.legal-modal-overlay').forEach(overlay => {
  overlay.addEventListener('click', e => { if (e.target === overlay) overlay.classList.remove('open'); });
});
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') document.querySelectorAll('.legal-modal-overlay.open').forEach(m => m.classList.remove('open'));
});

function showError(id, msg) {
  const el = document.getElementById(id);
  if (el) { el.textContent = msg; el.style.display = 'block'; }
}
function hideError(id) {
  const el = document.getElementById(id);
  if (el) { el.textContent = ''; el.style.display = 'none'; }
}
</script>
</body>
</html>
